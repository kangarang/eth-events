(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{242:function(e,t,n){e.exports=n(413)},247:function(e,t,n){},260:function(e,t,n){},413:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(194),c=n.n(o),i=(n(247),n(16)),u=n(10),s=n(29),l=n(31),f=n.n(l),b=(n(260),n(18)),p=n(19),m=n(7);function d(){var e=Object(b.a)(["\n  min-width: 0;\n\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  ","\n  ",";\n  ",";\n"]);return d=function(){return e},e}var O=p.a.div(d(),m.h,m.c,m.e,m.i,m.d,m.b,m.a,m.g,m.f);O.displayName="Box";var v=O;function g(){var e=Object(b.a)(["\n  border: 1px solid black;\n  border-radius: 1px;\n  padding: 0.8rem 1.2rem;\n  font-size: 0.8rem;\n\n  color: black;\n  background-color: white;\n\n  ",";\n  ",";\n  ",";\n  ",";\n  ","\n  ",";\n"]);return g=function(){return e},e}var h=p.a.button(g(),m.h,m.c,m.e,m.i,m.a,m.g),y=function(e){return r.createElement(h,e)};y.displayName="Button";var E=y;function j(){var e=Object(b.a)(["\n  word-break: break-all;\n"]);return j=function(){return e},e}function w(){var e=Object(b.a)(["\n  width: ",";\n  padding: ",";\n"]);return w=function(){return e},e}function k(){var e=Object(b.a)(["\n  display: flex;\n  flex-wrap: ",";\n  justify-content: ",";\n  align-items: ",";\n  flex-direction: ",";\n\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n"]);return k=function(){return e},e}var S=p.a.div(k(),(function(e){return e.wrapReverse?"wrap-reverse":e.wrap?"wrap":"nowrap"}),(function(e){return e.justifyContent?e.justifyContent:e.justifyCenter?"center":e.justifyAround?"space-around":e.justifyBetween?"space-between":e.justifyEnd?"flex-end":"flex-start"}),(function(e){return e.alignItems?e.alignItems:e.alignStretch?"stretch":e.alignEnd?"flex-end":e.alignCenter?"center":e.alignBaseline?"baseline":"flex-start"}),(function(e){return e.column?"column":"row"}),m.h,m.c,m.e,m.i,m.b,m.a,m.g,m.f),P=(p.a.div(w(),(function(e){return e.three?"33.33%":e.four?"25%":"50%"}),(function(e){return e.noPadding?0:"15px"})),Object(p.a)(S)(j()),S);function D(){var e=Object(b.a)(["\n  border: 1px solid grey;\n  border-radius: 2px;\n  padding: 0.8em;\n  font-size: 0.8em;\n  margin: 1em 0;\n\n  color: black;\n  background-color: #EBEBEB;\n\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  ","\n  ",";\n  ",";\n"]);return D=function(){return e},e}function x(){var e=Object(b.a)(["\n  border: 1px solid grey;\n  border-radius: 2px;\n  padding: 0.8em;\n  font-size: 0.8em;\n  margin: 1em 0;\n\n  color: black;\n  background-color: #EBEBEB;\n\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  ","\n  ",";\n  ",";\n"]);return x=function(){return e},e}var C=p.a.input(x(),m.h,m.c,m.e,m.i,m.d,m.b,m.a,m.g,m.f),N=p.a.textarea(D(),m.h,m.c,m.e,m.i,m.d,m.b,m.a,m.g,m.f),A=function(e){return"textarea"===e.type?r.createElement(N,Object.assign({},e,{onChange:function(t){return e.handleChange(t.target.value)}})):r.createElement(C,Object.assign({},e,{type:e.type||"text",onChange:function(t){return e.handleChange(t.target.value)}}))};A.displayName="Input";var B=A,T=n(17),I=n.n(T),_=n(94);function V(){var e=Object(b.a)(["\n  text-decoration: none;\n  color: blue;\n  cursor: pointer;\n\n  &:active,\n  &:focus,\n  &:visited {\n    color: darkblue;\n    transition: color 0.15s ease-in;\n  }\n\n  ",";\n  ",";\n  ",";\n  ",";\n  ","\n  ",";\n"]);return V=function(){return e},e}var z=p.a.a(V(),m.h,m.c,m.e,m.i,m.a,m.g);z.displayName="A";var H=z;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=e.indexOf(".");return e.slice(0,n)+e.slice(n,n+t)}(s.utils.commify(function(e){return s.utils.formatUnits(e,18)}(e)),t)}function L(e){return e.map((function(e){return"".concat(e.type).concat(e.name&&" ".concat(e.name))})).join(", ")}function M(e){var t=L(e.inputs),n=e.outputs&&e.outputs.length>0?": (".concat(L(e.outputs),")"):"";return F({},e,{signature:"".concat(e.name,"(").concat(t,")").concat(n)})}var G=/^([^0-9]*)$/;function W(e){return e.map((function(e){var t=Object.keys(e.values).reduce((function(t,n){var r=e.values[n];return G.test(n)&&"length"!==n?(r.hasOwnProperty("_hex")&&(r=r.toString()),F({},t,Object(i.a)({},n,r))):t}),{});return F({},e,{values:t})}))}function U(e){return"object"===typeof e&&e.hasOwnProperty("_hex")?e.toString():"number"===typeof e?s.utils.bigNumberify(e).toString():"boolean"===typeof e?e?"true":"false":e}function $(e,t){return e.includes("balance")||e.includes("tokens")||e.includes("totalsupply")?J(t):t}function q(e,t){return!e.includes("date")&&!e.includes("time")||e.includes("tokens")?t:new Date(1e3*parseInt(t)).toLocaleString()}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e){var t=e.methods,n=e.methodType,o=e.contract,c=e.contractName,s=e.handleHideMethod,l=Object(r.useState)(!1),f=Object(u.a)(l,2),b=f[0],p=f[1],m=Object(r.useState)({}),d=Object(u.a)(m,2),O=d[0],g=d[1];function h(){return(h=Object(_.a)(I.a.mark((function e(t){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.name.toLowerCase(),e.next=4,o[t.name]();case 4:r=e.sent,console.log("method.name:",t.name),console.log("typeof val:",typeof r),r=U(r),r=$(n,r),r=q(n,r),g(Q({},O,Object(i.a)({},t.name,r))),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(0),console.error("ERROR: ".concat(e.t0.message)),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}return a.a.createElement(v,{mb:2},a.a.createElement(v,{mb:0,onClick:function(){return p(!b)}},"".concat(n," (").concat(t.length,")")),b&&t.map((function(e){return a.a.createElement(v,{mb:"0.5rem",key:e.name},a.a.createElement(v,{fontSize:"0.7rem"},"- ",0===e.inputs.length&&1===e.outputs.length?a.a.createElement(H,{onClick:function(){return function(e){return h.apply(this,arguments)}(e)}},"".concat(e.signature)):e.signature,". . ",a.a.createElement(H,{onClick:function(){return s(e.name,c)}},"HIDE")),a.a.createElement(v,null,O[e.name]&&O[e.name]))})))},Y=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(n){return}},Z=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(r){}},ee=function(e){var t=e.children;return a.a.createElement(P,{width:1,justifyBetween:!0,alignCenter:!0},t)},te=function(e){var t=e.label,n=e.value,r=e.handleChange,o=e.inputComponent;return a.a.createElement(ee,null,a.a.createElement("div",null,t),o||a.a.createElement(B,{width:.6,value:n,handleChange:r}))};function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return e.filter((function(e){return!t[n]||!t[n].hasOwnProperty(e.name)}))}var oe=function(e){var t=e.error,n=e.setError,o=e.localAbis,c=e.setLocalAbis,s=e.contracts,l=Object(r.useState)(""),b=Object(u.a)(l,2),p=b[0],m=b[1],d=Object(r.useState)(""),O=Object(u.a)(d,2),g=O[0],h=O[1],y=Object(r.useState)(""),j=Object(u.a)(y,2),w=j[0],k=j[1],S=Object(r.useState)({}),D=Object(u.a)(S,2),x=D[0],C=D[1];function N(e,t){C(re({},x,Object(i.a)({},t,re({},x[t],Object(i.a)({},e,!0)))))}return Object(r.useEffect)((function(){var e=Y("SAVED_HIDDEN_METHODS");e&&C(e)}),[]),Object(r.useEffect)((function(){var e=Y("SAVED_HIDDEN_METHODS");Z("SAVED_HIDDEN_METHODS",re({},e,{},x))}),[x]),a.a.createElement(v,{className:"Contracts"},a.a.createElement(v,{color:"red"},t),a.a.createElement(P,{p:4},a.a.createElement(v,{width:.5,mr:4},"undefined"===typeof o||f()(o)?a.a.createElement(v,null,"Nothing here. Save a new contract --\x3e"):Object.keys(o).map((function(e){var t=o[e],n=t.abi,r=t.address,c=n.filter((function(e){return"function"===e.type&&!e.constant})),i=n.filter((function(e){return"function"===e.type&&e.constant})),u=n.filter((function(e){return"event"===e.type})),l=c.map(M),f=i.map(M),b=u.map(M),p=ae(f,x,e),m=ae(l,x,e),d=ae(b,x,e);return a.a.createElement(v,{mb:4,key:e},a.a.createElement(v,{mb:1,p:2,fontSize:3,border:"1px solid black"},e),a.a.createElement(v,{p:2,border:"1px solid black"},a.a.createElement(v,{pb:2,fontSize:0},"Address:"," ",a.a.createElement(H,{href:"https://etherscan.io/address/".concat(r),target:"_blank"},r)),a.a.createElement(X,{methodType:"Calls",methods:p,contract:s[e],contractName:e,handleHideMethod:N}),a.a.createElement(X,{methodType:"Transactions",methods:m,contractName:e,handleHideMethod:N}),a.a.createElement(X,{methodType:"Events",methods:d,contractName:e,handleHideMethod:N})))}))),a.a.createElement(v,{width:.5},a.a.createElement(v,{fontSize:36,fontWeight:"bold",mb:3},"Save new contract"),a.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),"undefined"!==typeof g)try{var r=JSON.parse(g),a=re({},o,Object(i.a)({},p,{abi:r,address:w}));c(a),n(""),m(""),h(""),k("")}catch(t){n("Invalid JSON abi")}}},a.a.createElement(P,{column:!0},a.a.createElement(te,{label:"Contract name",value:p,handleChange:m}),a.a.createElement(te,{label:"Contract address",value:w,handleChange:k}),a.a.createElement(te,{label:"Contract ABI",inputComponent:a.a.createElement(B,{width:.6,type:"textarea",rows:"10",cols:"100",value:g,handleChange:h})}),a.a.createElement(E,null,"Save"))))))},ce=n(197),ie=n(57),ue=n.n(ie),se=n(198);function le(){var e=Object(b.a)(["\n  height: 80vh;\n"]);return le=function(){return e},e}var fe=p.a.div(le()),be=function(e){var t=e.events;console.log("events:",t);var n=t.TokenCapacitor.filter((function(e){return"Donation"===e.name})).map((function(e){return{id:e.txHash+e.logIndex,group:"TokenCapacitor",blockNumber:e.blockNumber,numTokens:e.values.numTokens}})),r=5,o=10,c=20,i=30;return a.a.createElement(fe,null,a.a.createElement(se.a,{data:n,layout:"horizontal",layers:["grid","axes","nodes","mesh","annotations"],groups:["Gatekeeper","TokenCapacitor","ParameterStore"],value:"blockNumber",valueScale:{type:"linear",min:85e5,max:9079928},size:function(e){var t=e.numTokens;return s.utils.bigNumberify(t).lt("250000000000000000000")?r:s.utils.bigNumberify(t).lt("600000000000000000000")?o:s.utils.bigNumberify(t).lt("1200000000000000000000")?c:i},forceStrength:4,simulationIterations:100,colors:{scheme:"nivo"},borderColor:{from:"color",modifiers:[["darker",.6],["opacity",.5]]},margin:{top:80,right:100,bottom:80,left:100},axisTop:{orient:"top",tickSize:10,tickPadding:5,tickRotation:0},axisRight:{orient:"right",tickSize:10,tickPadding:5,tickRotation:0},axisBottom:{orient:"bottom",tickSize:10,tickPadding:5,tickRotation:0},axisLeft:{orient:"left",tickSize:10,tickPadding:5,tickRotation:0},motionStiffness:50,motionDamping:10}))};function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=function(e){var t=e.error,n=e.contracts,o=Object(r.useState)([]),c=Object(u.a)(o,2),i=c[0],s=c[1],l=Object(r.useState)({}),b=Object(u.a)(l,2),p=b[0],m=b[1];function d(){return(d=Object(_.a)(I.a.mark((function e(){var t,r,a,o,c,i,u,s,l,f,b,p,d,O,v,g,h,y,E,j,w,k,S;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.Gatekeeper,r=n.TokenCapacitor,a=n.ParameterStore,o={abi:t.interface.abi,address:t.address,name:"Gatekeeper"},c={abi:r.interface.abi,address:r.address,name:"TokenCapacitor"},i={abi:a.interface.abi,address:a.address,name:"ParameterStore"},u=[o,c,i],console.log("contractObjects:",u),s=Object({NODE_ENV:"production",PUBLIC_URL:"/eth-events"}).INFURA_PROJECT_ID,l="https://mainnet.infura.io/v3/".concat(s),s||(l="https://mainnet.infura.io"),8392794,f=[],b=Object(ce.EthEvents)(u,l,8392794,f),d=me({},p={fromBlock:8392794,toBlock:"latest",address:o.address,topics:[]},{address:c.address}),O=me({},p,{address:i.address}),e.prev=17,e.next=20,b.getEventsByFilter(p);case 20:return v=e.sent,e.next=23,b.getEventsByFilter(d);case 23:return g=e.sent,e.next=26,b.getEventsByFilter(O);case 26:h=e.sent,y=ue()(v,"blockNumber"),E=ue()(g,"blockNumber"),j=ue()(h,"blockNumber"),w=W(y),k=W(E),S=W(j),console.log("cleanTc:",k),m({Gatekeeper:w,TokenCapacitor:k,ParameterStore:S}),e.next=41;break;case 37:throw e.prev=37,e.t0=e.catch(17),console.error(e.t0),e.t0;case 41:case"end":return e.stop()}}),e,null,[[17,37]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=Y("SAVED_EVENTS");"undefined"!==typeof e&&m(e)}),[]),Object(r.useEffect)((function(){if(!f()(n)){var e=Object.keys(n);s(e);var t=Y("SAVED_EVENTS");f()(t)&&function(){d.apply(this,arguments)}()}}),[n]),Object(r.useEffect)((function(){Y("SAVED_EVENTS");f()(p)||f()(p.Gatekeeper)||Z("SAVED_EVENTS",p)}),[p]),a.a.createElement(v,{className:"Events"},a.a.createElement(v,{color:"red"},t),!f()(p)&&a.a.createElement(be,{events:p}),a.a.createElement(P,{p:4},a.a.createElement(v,{width:1},a.a.createElement(v,{fontSize:36,fontWeight:"bold",mb:3},"Events"),a.a.createElement(P,null,i.map((function(e){return a.a.createElement("div",{key:e},e)})))),a.a.createElement(v,null)))};function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(n,!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=function(){var e=Object(r.useState)({}),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)({}),l=Object(u.a)(c,2),b=l[0],p=l[1],m=Object(r.useState)("Contracts"),d=Object(u.a)(m,2),O=d[0],g=d[1],h=Object(r.useState)(""),y=Object(u.a)(h,2),j=y[0],w=y[1];return Object(r.useEffect)((function(){var e=Y("SAVED_ABIS");if("undefined"!==typeof e&&"undefined"!==typeof window&&"undefined"!==typeof window.ethereum){var t=new s.providers.Web3Provider(window.ethereum),n=Object.keys(e).reduce((function(n,r){if(!n[r]){var a=e[r];return ve({},n,Object(i.a)({},r,new s.Contract(a.address,a.abi,t.getSigner())))}return n}),{});p(n),o(e)}}),[]),Object(r.useEffect)((function(){if(!f()(n)){console.log("localAbis:",n);var e=Y("SAVED_ABIS");Z("SAVED_ABIS",ve({},e,{},n))}}),[n]),a.a.createElement(v,{className:"App"},a.a.createElement(P,{p:"2rem 0 0 2rem"},a.a.createElement(E,{bg:"Contracts"===O?"#96FF64":"white",mr:4,onClick:function(){return g("Contracts")}},"Contracts"),a.a.createElement(E,{bg:"Events"===O?"#96FF64":"white",onClick:function(){return g("Events")}},"Events")),"Contracts"===O?a.a.createElement(oe,{error:j,setError:w,localAbis:n,setLocalAbis:o,contracts:b}):"Events"===O?a.a.createElement(de,{error:j,contracts:b}):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[242,1,2]]]);
//# sourceMappingURL=main.f48f12e1.chunk.js.map